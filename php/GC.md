#垃圾收集

##参开连接
https://www.php.cn/topic/php7/449594.html

1. 5.3前用的是引用计数
    当一个变量引用减少时，unset 操作等，如果引用变为0，就会进行内存回收，否则不会回收内存。会导致循环引用而引发的内存溢出。
2. 5.3后用的标记法？
    1. 当一个变量引用减少时，如果引用为0就直接回收内存，如果不为0，就将变量放进一个缓存区，变量首先标记为紫色GC_PURPLE，防止重复放进缓存区。
    2. 当缓存区慢了之后就开始做垃圾回收。
    3. 首先第一次深度优先遍历，将变量的引用尝试 -1，然后标记为灰色。
    4. 第二次遍历，如果变量的引用为0，则标记为白色GC_WHITE, 否则就对改变量做深度优先遍历，对该变量的引用 +1，还原回去，并标记为黑色。
    5. 第三次遍历，如果标记为黑色的变量，则移出缓存区。剩下的都是内存垃圾，做内存回收。